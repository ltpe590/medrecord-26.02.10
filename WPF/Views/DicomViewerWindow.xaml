<Window x:Class="WPF.Views.DicomViewerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DICOM Viewer" Height="700" Width="950"
        WindowStartupLocation="CenterOwner"
        Background="#1A1A2E" MinHeight="500" MinWidth="700">
    <Window.Resources>
        <Style x:Key="DarkLabel" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#CCCCCC"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
        <Style x:Key="ToolBtn" TargetType="Button">
            <Setter Property="Background" Value="#2D2D44"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#4A4A6A"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Height" Value="32"/>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <!-- Toolbar -->
        <Border Grid.Row="0" Background="#16213E" Padding="10,6">
            <DockPanel>
                <TextBlock x:Name="TxtFileName" Text="No file loaded"
                           Foreground="#90CAF9" FontSize="13" FontWeight="SemiBold"
                           VerticalAlignment="Center" Margin="0,0,20,0"/>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,16,0">
                    <Button Style="{StaticResource ToolBtn}" Content="&#9664;" Width="30" Click="BtnPrevFrame_Click" ToolTip="Previous frame"/>
                    <TextBlock x:Name="TxtFrameInfo" Text="1 / 1" Foreground="White" FontSize="12" VerticalAlignment="Center" Margin="8,0"/>
                    <Button Style="{StaticResource ToolBtn}" Content="&#9654;" Width="30" Click="BtnNextFrame_Click" ToolTip="Next frame"/>
                </StackPanel>
                <Button Style="{StaticResource ToolBtn}" Content="&#8635; Reset" Margin="0,0,8,0" Click="BtnReset_Click"/>
                <Button Style="{StaticResource ToolBtn}" Content="&#8857; Invert" Margin="0,0,8,0" Click="BtnInvert_Click"/>
                <Button x:Name="BtnSaveJpg" Style="{StaticResource ToolBtn}"
                        Content="&#128190; Save as JPG"
                        Background="#1B5E20" BorderBrush="#388E3C"
                        DockPanel.Dock="Right" HorizontalAlignment="Right"
                        Click="BtnSaveJpg_Click"/>
            </DockPanel>
        </Border>
        <!-- Image viewport -->
        <Border Grid.Row="1" Background="#0D0D1A" ClipToBounds="True"
                x:Name="ImageViewport"
                MouseWheel="Viewport_MouseWheel"
                MouseLeftButtonDown="Viewport_MouseLeftButtonDown"
                MouseLeftButtonUp="Viewport_MouseLeftButtonUp"
                MouseMove="Viewport_MouseMove"
                Cursor="Cross">
            <Canvas x:Name="ImageCanvas" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Image x:Name="DicomImage" RenderOptions.BitmapScalingMode="HighQuality" Stretch="None"/>
            </Canvas>
        </Border>
        <!-- W/L + Zoom controls -->
        <Border Grid.Row="2" Background="#16213E" Padding="14,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="160"/>
                    <ColumnDefinition Width="50"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="160"/>
                    <ColumnDefinition Width="50"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="50"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Window Center:" Style="{StaticResource DarkLabel}" Margin="0,0,6,0"/>
                <Slider x:Name="SliderWC" Grid.Column="1" Minimum="-2000" Maximum="4000" Value="40" Foreground="#4FC3F7" ValueChanged="SliderWC_ValueChanged"/>
                <TextBlock x:Name="TxtWC" Grid.Column="2" Text="40" Style="{StaticResource DarkLabel}" Margin="4,0"/>
                <TextBlock Grid.Column="4" Text="Window Width:" Style="{StaticResource DarkLabel}" Margin="0,0,6,0"/>
                <Slider x:Name="SliderWW" Grid.Column="5" Minimum="1" Maximum="4000" Value="400" Foreground="#4FC3F7" ValueChanged="SliderWW_ValueChanged"/>
                <TextBlock x:Name="TxtWW" Grid.Column="6" Text="400" Style="{StaticResource DarkLabel}" Margin="4,0"/>
                <TextBlock Grid.Column="8" Text="Zoom:" Style="{StaticResource DarkLabel}" Margin="0,0,6,0"/>
                <Slider x:Name="SliderZoom" Grid.Column="9" Minimum="0.1" Maximum="8" Value="1" Foreground="#4FC3F7" ValueChanged="SliderZoom_ValueChanged"/>
                <TextBlock x:Name="TxtZoom" Grid.Column="10" Text="100%" Style="{StaticResource DarkLabel}" Margin="4,0"/>
                <TextBlock x:Name="TxtPixelInfo" Grid.Column="12" Text="HU: --" Foreground="#80CBC4" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
            </Grid>
        </Border>
        <!-- Metadata strip -->
        <Border Grid.Row="3" Background="#0F0F1E" Padding="14,5">
            <WrapPanel>
                <TextBlock x:Name="TxtPatientMeta"  Foreground="#607D8B" FontSize="10" Margin="0,0,20,0"/>
                <TextBlock x:Name="TxtModalityMeta" Foreground="#607D8B" FontSize="10" Margin="0,0,20,0"/>
                <TextBlock x:Name="TxtDateMeta"     Foreground="#607D8B" FontSize="10" Margin="0,0,20,0"/>
                <TextBlock x:Name="TxtSizeMeta"     Foreground="#607D8B" FontSize="10" Margin="0,0,20,0"/>
                <TextBlock x:Name="TxtPixelSpacing" Foreground="#607D8B" FontSize="10"/>
            </WrapPanel>
        </Border>
    </Grid>
</Window>